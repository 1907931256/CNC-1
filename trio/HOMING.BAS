INCLUDE "GLOBAL_DEFS"

ETHERCAT($21,1,2,0)

CO_WRITE_AXIS(4,$6060,0,2,-1,6)
CO_WRITE_AXIS(4,$6098,0,2,-1,2)
CO_WRITE_AXIS(4,$6099,1,7,-1,10000)
CO_WRITE_AXIS(4,$6099,2,7,-1,10000)
CO_WRITE_AXIS(4,$609A,0,7,-1,200000)
CO_WRITE_AXIS(4,$607C,0,4,-1,0)
CO_WRITE_AXIS(4,$6040,0,6,-1,31)
CO_WRITE_AXIS(4,$6040,0,6,-1,6)

CO_WRITE_AXIS(5,$6060,0,2,-1,6)
CO_WRITE_AXIS(5,$6098,0,2,-1,30)
CO_WRITE_AXIS(5,$6099,1,7,-1,10000)
CO_WRITE_AXIS(5,$6099,2,7,-1,10000)
CO_WRITE_AXIS(5,$609A,0,7,-1,200000)
CO_WRITE_AXIS(5,$607C,0,4,-1,0)
CO_WRITE_AXIS(5,$6040,0,6,-1,31)
WA(30000)

ETHERCAT($21,1,3,0)

GOSUB uvz_homing
STOP

uvz_homing:
SERVO AXIS(axis_u)=1
SERVO AXIS(axis_v)=1
SERVO AXIS(axis_z)=1
WDOG=ON
'RUN "MONITOR_ZERO",17
'
'SPEED AXIS(axis_u)=10
'CREEP AXIS(axis_u)=0.1
'DATUM_IN=65
'DATUM(5) AXIS(axis_u)
'WAIT IDLE
'
'STOP "MONITOR_ZERO",17
BASE(axis_u)
MOVEABS(0)
BASE(axis_v)
MOVEABS(-15)
BASE(axis_z)
MOVEABS(-20)
WAIT IDLE

SERVO AXIS(axis_u)=OFF
SERVO AXIS(axis_v)=OFF
SERVO AXIS(axis_z)=OFF
WDOG=OFF
RETURN
